<div id='calendar'></div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'timeGridWeek',
            locale: 'fr',
            slotMinTime: '08:00:00',
            slotMaxTime: '20:00:00',
            weekends: false,
            aspectRatio: 1.5,
            eventSources: [{
                url: '/admin/rdv',
                eventDataTransform: ev => {
                    let at = new Date(ev.at);
                    return {
                        start: at,
                        end: at.setHours(at.getHours() + 1),
                        title: ev.client.lastname + " " + ev.client.firstname
                    }
                }
            }],
            headerToolbar: {
                start: 'prev, next today',
                center: 'title',
                end: 'dayGridMonth,timeGridWeek'
            }
        });
        calendar.render();
    });
</script>
